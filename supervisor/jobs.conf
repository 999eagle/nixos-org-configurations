<jobs>

  <!-- general configuration -->

  <var varName='nixpkgsBaseline'>https://svn.cs.uu.nl:12443/repos/trace/nixpkgs/trunk</var>
  <var varName='jobBaseline'>https://svn.cs.uu.nl:12443/repos/trace/release/trunk</var>
  <var varName='defaultJobScript'>generic-dist/build+upload.sh</var>
  <var varName='cacheDir'>http://dutiel.st.ewi.tudelft.nl/releases/nix-cache</var>
  <var varName='systems'>https://svn.cs.uu.nl:12443/repos/trace/configurations/trunk/tud/supervisor/systems.nix</var>

  <!-- distribution directories and password -->

  <var varName='nixDistDir'>http://dutiel.st.ewi.tudelft.nl/releases/nix</var>
  <var varName='nixPassword'>/home/buildfarm/secrets/nix-upload-passwd</var>

  <var varName='metaEnvDistDir'>http://dutiel.st.ewi.tudelft.nl/releases/meta-environment</var>
  <var varName='metaEnvPassword'>/home/buildfarm/secrets/meta-environment-upload-passwd</var>

  <var varName='strategoxtDistDir'>http://dutiel.st.ewi.tudelft.nl/releases/strategoxt</var>
  <var varName='strategoxtPassword'>/home/buildfarm/secrets/strategoxt-upload-passwd</var>

  <!-- baselines -->

  <var varName='atermLatestInfo'>http://dutiel.st.ewi.tudelft.nl/releases/meta-environment/aterm-unstable-latest/release-info.xml</var>
  <var varName='sdf2BundleLatestInfo'>http://dutiel.st.ewi.tudelft.nl/releases/meta-environment/sdf2-bundle-unstable-latest/release-info.xml</var>

  <!-- jobs -->

  <job id='patchelf-head'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='patchelfHead' type='svn' url='https://svn.cs.uu.nl:12443/repos/trace/patchelf/trunk' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/nix/patchelf.nix</arg>
    <arg>patchelfHeadRelease</arg>
    <arg>${nixDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>eelco@cs.uu.nl</notify-address>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${nixPassword}</secrets>
  </job>

  <job id='nix-head'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='nixHead' type='svn' url='https://svn.cs.uu.nl:12443/repos/trace/nix/trunk' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/nix/nix.nix</arg>
    <arg>nixHeadReleaseTUD</arg>
    <arg>${nixDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>eelco@cs.uu.nl</notify-address>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${nixPassword}</secrets>
  </job>

  <!-- Meta-Environment -->

  <job id='meta-build-env-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='metaBuildEnv' type='svn' url='svn+ssh://svn.cwi.nl/meta-build-env/trunk' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>metaBuildEnvUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='aterm-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='aterm' type='svn' url='svn+ssh://svn.cwi.nl/aterm/branches/64-bit-fixes' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>atermUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='sdf-library-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='sdfLibrary' type='svn' url='svn+ssh://svn.cwi.nl/sdf-library/trunk' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>sdfLibraryUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='toolbuslib-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='toolbuslib' type='svn' url='svn+ssh://svn.cwi.nl/toolbuslib/trunk' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />
    <input id='atermInfo' type='tgz' url='${atermLatestInfo}' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>toolbuslibUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='error-support-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='errorSupport' type='svn' url='svn+ssh://svn.cwi.nl/error-support/trunk' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />
    <input id='atermInfo' type='tgz' url='${atermLatestInfo}' />
    <input id='toolbuslibInfo' type='tgz' url='${metaEnvDistDir}/toolbuslib-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>errorSupportUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='tide-support-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='tideSupport' type='svn' url='svn+ssh://svn.cwi.nl/tide-support/trunk' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />
    <input id='atermInfo' type='tgz' url='${atermLatestInfo}' />
    <input id='toolbuslibInfo' type='tgz' url='${metaEnvDistDir}/toolbuslib-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>tideSupportUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='pt-support-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='ptSupport' type='svn' url='svn+ssh://svn.cwi.nl/pt-support/trunk' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />
    <input id='atermInfo' type='tgz' url='${atermLatestInfo}' />
    <input id='toolbuslibInfo' type='tgz' url='${metaEnvDistDir}/toolbuslib-unstable-latest/release-info.xml' />
    <input id='errorSupportInfo' type='tgz' url='${metaEnvDistDir}/error-support-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>ptSupportUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='asf-support-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='asfSupport' type='svn' url='svn+ssh://svn.cwi.nl/asf-support/trunk' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />
    <input id='atermInfo' type='tgz' url='${atermLatestInfo}' />
    <input id='ptSupportInfo' type='tgz' url='${metaEnvDistDir}/pt-support-unstable-latest/release-info.xml' />
    <input id='toolbuslibInfo' type='tgz' url='${metaEnvDistDir}/toolbuslib-unstable-latest/release-info.xml' />
    <input id='errorSupportInfo' type='tgz' url='${metaEnvDistDir}/error-support-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>asfSupportUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='sdf-support-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='sdfSupport' type='svn' url='svn+ssh://svn.cwi.nl/sdf-support/trunk' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />
    <input id='atermInfo' type='tgz' url='${atermLatestInfo}' />
    <input id='ptSupportInfo' type='tgz' url='${metaEnvDistDir}/pt-support-unstable-latest/release-info.xml' />
    <input id='toolbuslibInfo' type='tgz' url='${metaEnvDistDir}/toolbuslib-unstable-latest/release-info.xml' />
    <input id='errorSupportInfo' type='tgz' url='${metaEnvDistDir}/error-support-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>sdfSupportUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='asc-support-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='ascSupport' type='svn' url='svn+ssh://svn.cwi.nl/asc-support/trunk' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />
    <input id='atermInfo' type='tgz' url='${atermLatestInfo}' />
    <input id='errorSupportInfo' type='tgz' url='${metaEnvDistDir}/error-support-unstable-latest/release-info.xml' />
    <input id='toolbuslibInfo' type='tgz' url='${metaEnvDistDir}/toolbuslib-unstable-latest/release-info.xml' />
    <input id='ptSupportInfo' type='tgz' url='${metaEnvDistDir}/pt-support-unstable-latest/release-info.xml' />
    <input id='asfSupportInfo' type='tgz' url='${metaEnvDistDir}/asf-support-unstable-latest/release-info.xml' />
    <input id='sglrInfo' type='tgz' url='${metaEnvDistDir}/sglr-unstable-latest/release-info.xml' />
    <input id='tideSupportInfo' type='tgz' url='${metaEnvDistDir}/tide-support-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>ascSupportUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='pgen-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='pgen' type='svn' url='svn+ssh://svn.cwi.nl/pgen/trunk' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />
    <input id='atermInfo' type='tgz' url='${atermLatestInfo}' />
    <input id='errorSupportInfo' type='tgz' url='${metaEnvDistDir}/error-support-unstable-latest/release-info.xml' />
    <input id='toolbuslibInfo' type='tgz' url='${metaEnvDistDir}/toolbuslib-unstable-latest/release-info.xml' />
    <input id='ptSupportInfo' type='tgz' url='${metaEnvDistDir}/pt-support-unstable-latest/release-info.xml' />
    <input id='asfSupportInfo' type='tgz' url='${metaEnvDistDir}/asf-support-unstable-latest/release-info.xml' />
    <input id='sglrInfo' type='tgz' url='${metaEnvDistDir}/sglr-unstable-latest/release-info.xml' />
    <input id='tideSupportInfo' type='tgz' url='${metaEnvDistDir}/tide-support-unstable-latest/release-info.xml' />
    <input id='sdfSupportInfo' type='tgz' url='${metaEnvDistDir}/sdf-support-unstable-latest/release-info.xml' />
    <input id='ascSupportInfo' type='tgz' url='${metaEnvDistDir}/asc-support-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>pgenUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='sglr-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='sglr' type='svn' url='svn+ssh://svn.cwi.nl/sglr/trunk' />

    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />
    <input id='atermInfo' type='tgz' url='${atermLatestInfo}' />
    <input id='toolbuslibInfo' type='tgz' url='${metaEnvDistDir}/toolbuslib-unstable-latest/release-info.xml' />
    <input id='errorSupportInfo' type='tgz' url='${metaEnvDistDir}/error-support-unstable-latest/release-info.xml' />
    <input id='ptSupportInfo' type='tgz' url='${metaEnvDistDir}/pt-support-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>sglrUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='sdf2-bundle-unstable'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />

    <input id='atermInfo' type='tgz' url='${atermLatestInfo}' />
    <input id='sdfLibraryInfo' type='tgz' url='${metaEnvDistDir}/sdf-library-unstable-latest/release-info.xml' />
    <input id='toolbuslibInfo' type='tgz' url='${metaEnvDistDir}/toolbuslib-unstable-latest/release-info.xml' />
    <input id='errorSupportInfo' type='tgz' url='${metaEnvDistDir}/error-support-unstable-latest/release-info.xml' />
    <input id='ptSupportInfo' type='tgz' url='${metaEnvDistDir}/pt-support-unstable-latest/release-info.xml' />
    <input id='asfSupportInfo' type='tgz' url='${metaEnvDistDir}/asf-support-unstable-latest/release-info.xml' />
    <input id='sdfSupportInfo' type='tgz' url='${metaEnvDistDir}/sdf-support-unstable-latest/release-info.xml' />
    <input id='sglrInfo' type='tgz' url='${metaEnvDistDir}/sglr-unstable-latest/release-info.xml' />
    <input id='tideSupportInfo' type='tgz' url='${metaEnvDistDir}/tide-support-unstable-latest/release-info.xml' />
    <input id='ascSupportInfo' type='tgz' url='${metaEnvDistDir}/asc-support-unstable-latest/release-info.xml' />
    <input id='pgenInfo' type='tgz' url='${metaEnvDistDir}/pgen-unstable-latest/release-info.xml' />

    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>sdf2BundleUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

</jobs>
