<jobs>

  <!-- general configuration -->

  <var varName='nixpkgsBaseline'>https://svn.cs.uu.nl:12443/repos/trace/nixpkgs/trunk</var>
  <var varName='jobBaseline'>https://svn.cs.uu.nl:12443/repos/trace/release/trunk</var>
  <var varName='defaultJobScript'>generic-dist/build+upload.sh</var>
  <var varName='cacheDir'>http://dutiel.st.ewi.tudelft.nl/releases/nix-cache</var>
  <var varName='systems'>https://svn.cs.uu.nl:12443/repos/trace/configurations/trunk/tud/supervisor/systems.nix</var>

  <!-- distribution directories and password -->

  <var varName='nixDistDir'>http://dutiel.st.ewi.tudelft.nl/releases/nix</var>
  <var varName='nixPassword'>/home/buildfarm/secrets/nix-upload-passwd</var>

  <var varName='metaEnvDistDir'>http://dutiel.st.ewi.tudelft.nl/releases/meta-environment</var>
  <var varName='metaEnvPassword'>/home/nix/secrets/meta-environment-upload-passwd</var>

  <var varName='strategoxtDistDir'>http://dutiel.st.ewi.tudelft.nl/releases/strategoxt</var>
  <var varName='strategoxtPassword'>/home/nix/secrets/strategoxt-upload-passwd</var>

  <!-- jobs -->

  <job id='patchelf-head'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='patchelfHead' type='svn' url='https://svn.cs.uu.nl:12443/repos/trace/patchelf/trunk' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/nix/patchelf.nix</arg>
    <arg>patchelfHeadRelease</arg>
    <arg>${nixDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>eelco@cs.uu.nl</notify-address>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${nixPassword}</secrets>
  </job>

  <job id='nix-head'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='nixHead' type='svn' url='https://svn.cs.uu.nl:12443/repos/trace/nix/trunk' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/nix/nix.nix</arg>
    <arg>nixHeadReleaseTUD</arg>
    <arg>${nixDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>eelco@cs.uu.nl</notify-address>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${nixPassword}</secrets>
  </job>

  <job id='meta-build-env-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='metaBuildEnv' type='svn' url='svn+ssh://svn.cwi.nl/meta-build-env/trunk' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='systems' type='svn' url='${systems}' />
    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>metaBuildEnvUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

  <job id='aterm-trunk'>
    <input id='job' type='svn' url='${jobBaseline}' />
    <input id='nixpkgs' type='svn' url='${nixpkgsBaseline}' />
    <input id='aterm' type='svn' url='svn+ssh://svn.cwi.nl/aterm/trunk' />
    <input id='metaBuildEnvInfo' type='tgz' url='${metaEnvDistDir}/meta-build-env-unstable-latest/release-info.xml' />
    <input id='systems' type='svn' url='${systems}' />
    <job-script>${defaultJobScript}</job-script>
    <arg>./jobs/meta-environment/releases.nix</arg>
    <arg>atermUnstable</arg>
    <arg>${metaEnvDistDir}</arg>
    <arg>${cacheDir}</arg>
    <arg></arg>
    <notify-address>martin@cs.uu.nl</notify-address>
    <secrets>${metaEnvPassword}</secrets>
  </job>

</jobs>
